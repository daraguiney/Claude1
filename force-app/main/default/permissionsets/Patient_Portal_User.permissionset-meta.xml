<?xml version="1.0" encoding="UTF-8"?>
<PermissionSet xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Limited access for patient portal - patients can view their own data only</description>
    <hasActivationRequired>false</hasActivationRequired>
    <label>Patient Portal User</label>

    <!-- Patient Object Permissions - Read Only Own Record -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Patient__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Care Plan Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Care_Plan__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Appointment Object Permissions - View and Request -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Appointment__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Vital Signs Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Vital_Signs__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Medication Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Medication__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Provider Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Provider__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Medical Note Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Medical_Note__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Apex Class Access -->
    <classAccesses>
        <apexClass>AppointmentController</apexClass>
        <enabled>true</enabled>
    </classAccesses>
    <classAccesses>
        <apexClass>VitalsAnalyzer</apexClass>
        <enabled>true</enabled>
    </classAccesses>
</PermissionSet>
