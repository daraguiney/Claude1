<?xml version="1.0" encoding="UTF-8"?>
<PermissionSet xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Access for nurses to manage patient care, vitals, and medications with some limitations</description>
    <hasActivationRequired>false</hasActivationRequired>
    <label>Nurse Practitioner</label>

    <!-- Patient Object Permissions - Read/Edit but not Delete -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Patient__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Care Plan Object Permissions -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Care_Plan__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Appointment Object Permissions -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Appointment__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Vital Signs Object Permissions - Full Access -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>true</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Vital_Signs__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Medication Object Permissions -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Medication__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Provider Object Permissions - Read Only -->
    <objectPermissions>
        <allowCreate>false</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>false</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Provider__c</object>
        <viewAllRecords>true</viewAllRecords>
    </objectPermissions>

    <!-- Medical Note Object Permissions -->
    <objectPermissions>
        <allowCreate>true</allowCreate>
        <allowDelete>false</allowDelete>
        <allowEdit>true</allowEdit>
        <allowRead>true</allowRead>
        <modifyAllRecords>false</modifyAllRecords>
        <object>Medical_Note__c</object>
        <viewAllRecords>false</viewAllRecords>
    </objectPermissions>

    <!-- Apex Class Access -->
    <classAccesses>
        <apexClass>AppointmentController</apexClass>
        <enabled>true</enabled>
    </classAccesses>
    <classAccesses>
        <apexClass>VitalsAnalyzer</apexClass>
        <enabled>true</enabled>
    </classAccesses>

    <!-- Tab Visibility -->
    <tabSettings>
        <tab>Patient__c</tab>
        <visibility>Visible</visibility>
    </tabSettings>
    <tabSettings>
        <tab>Appointment__c</tab>
        <visibility>Visible</visibility>
    </tabSettings>
</PermissionSet>
